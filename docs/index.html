<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Index</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Index</h1>

    


    


    <h3> </h3>









    




    <section>
        <article><p><img align="left" src="http://dl.dropboxusercontent.com/u/79007/combyne.png"></p>
<p><strong>Stable: 0.3.9</strong></p>
<p><a href="https://travis-ci.org/tbranyen/combyne"><img src="https://travis-ci.org/tbranyen/combyne.png?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/tbranyen/combyne?branch=master"><img src="https://coveralls.io/repos/tbranyen/combyne/badge.png?branch=master" alt="Coverage Status"></a>
<a href="https://codeclimate.com/github/tbranyen/combyne"><img src="https://codeclimate.com/github/tbranyen/combyne.png" alt="Code Climahttps://codeclimate.com/github/tbranyen/combyne/badgeste"></a></p>
<p>No dependencies.  Can be loaded as a browser global, AMD module, and Node
module.  Works with Browserify.  Can be installed via NPM or Bower.</p>
<p>Combyne works great with:</p>
<ul>
<li><a href="https://github.com/tbranyen/combynexpress">Express</a></li>
<li><a href="https://github.com/chesles/combynify">Browserify</a></li>
<li><a href="https://github.com/tbranyen/combyne-amd-loader">AMD</a></li>
</ul>
<h2>Install.</h2><p>Node:</p>
<pre class="prettyprint source"><code>npm install combyne</code></pre><p>Bower:</p>
<pre class="prettyprint source"><code>bower install combyne</code></pre><h2>Getting started.</h2><h3>Node.</h3><p>Require in your source:</p>
<pre class="prettyprint source"><code>var combyne = require("combyne");</code></pre><h3>AMD.</h3><pre class="prettyprint source"><code>// Configure the path if necessary.
require({
  paths: {
    combyne: "path/to/combyne"
  }
});

// Use in a module.
define(["combyne"], function(combyne) {});</code></pre><p>There is also an AMD plugin for easier consumption and building:</p>
<p>https://github.com/tbranyen/combyne-amd-loader</p>
<h3>Browserify.</h3><p><a href="https://github.com/chesles/combynify">combynify</a> is a
<a href="https://github.com/substack/browserify">browserify</a> transform plugin to
pre-compile combyne templates.</p>
<p>In your code:</p>
<pre class="prettyprint source"><code>var template = require("./template.combyne");
var data = { ... }

template.render(data)</code></pre><p>Install combynify and browserify it:</p>
<pre class="prettyprint source"><code>npm install --save-dev combynify
browserify -t combynify main.js > bundle.js</code></pre><p>Once the template is precompiled, there is no dependency on the combyne
engine.</p>
<h3>Browser global.</h3><p><a href="https://github.com/tbranyen/combyne/releases">Include the latest stable</a>
in your markup:</p>
<pre class="prettyprint source"><code><script src="path/to/dist/combyne.js"></script></code></pre><h4>Compatibility.</h4><p>Combyne is written in ES5 and contains polyfills to provide support back to IE</p>
<ol>
<li>These polyfills are omitted in the <strong>dist/combyne.js</strong> file, but exist in
the <strong>dist/combyne.legacy.js</strong> file.  Use this if you are developing/testing
with older IE.</li>
</ol>
<p><a href="https://saucelabs.com/u/combyne"><img src="https://saucelabs.com/browser-matrix/combyne.svg" alt="Selenium Test Status"></a></p>
<h2>Basic usage.</h2><pre class="prettyprint source"><code>var tmpl = combyne("hello {{msg}}!");
tmpl.render({ msg: "world" });

// => hello world!</code></pre><h2>Features.</h2><p>Combyne works by parsing your template into an AST.  This provides mechanisms
for intelligent compilation and optimization.  The template is converted to
JavaScript and invoked upon calling render with data.</p>
<h3>Security.</h3><p>By default all templates are encoded to avoid possible issues arising from XSS
attacks.  This is specifically applied to properties and you can avoid this by
using the raw property style: <code>{{{ value }}}</code>.  This is very similar to
Mustache.</p>
<p>While using this template engine in the browser, it is important to note that
you should not trust unknown values to render unencoded.  The recommendation is
to forget it exists while writing templates in the browser, unless you know
what you're doing and have a valid use case.</p>
<p>View this <a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting">XSS (Cross Site Scripting) Prevention Cheat Sheet</a>_Prevention_Cheat_Sheet) for more information.</p>
<h3>Comments.</h3><p>Comments are useful for ignoring anything between the open and close.  They can
be nested.</p>
<pre class="prettyprint source"><code>var tmpl = combyne("test {%-- not parsed --%}");
tmpl.render();

// => test</code></pre><h3>Custom delimiters.</h3><p>If you are not happy with the default Mustache-like syntax, you can trivially
change the delimiters to suit your needs.  You may only change the delimiters
at a global level, because templates are compiled immediately after invoking
the <code>combyne</code> function.</p>
<pre class="prettyprint source"><code>// This sets the delimiters, and applies to all templates.
combyne.settings.delimiters = {
  START_PROP: "[[",
  END_PROP: "]]"
};

var tmpl = combyne("[[msg]]", { msg: "hello world" });

tmpl.render();
// => hello world</code></pre><p>Defaults:</p>
<pre class="prettyprint source"><code>START_RAW:  "{{{"
END_RAW:    "}}}"
START_PROP: "{{"
END_PROP:   "}}"
START_EXPR: "{%"
END_EXPR:   "%}"
COMMENT:    "--"
FILTER:     "|"</code></pre><h3>Replacing template variables.</h3><pre class="prettyprint source"><code>var template = "{{foo}}";
var context = { foo: "hello" };

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "hello"</code></pre><h3>Using filters on variables.</h3><pre class="prettyprint source"><code>var template = "{{foo|reverse}}";
var context = { foo: "hello" };

var tmpl = combyne(template);

tmpl.registerFilter("reverse", function(val) {
  return val.split("").reverse().join("");
});

var output = tmpl.render(context);
/// output == "olleh"</code></pre><h4>Passing arguments to filters.</h4><p>You may find that the property value is not enough information for the filter
function, in which case you can send additional arguments.</p>
<pre class="prettyprint source"><code>var tmpl = combyne("{{ code|highlight 'javascript' }}");

tmpl.registerFilter("highlight", function(code, language) {
  // Magic highlight function that takes code and language.
  return highlight(code, language);
});</code></pre><h4>Chaining filters on variables.</h4><pre class="prettyprint source"><code>var template = "{{foo|reverse|toUpper}}";
var context = { foo: "hello" };

var tmpl = combyne(template);

tmpl.registerFilter("reverse", function(val) {
  return val.split("").reverse().join("");
});

tmpl.registerFilter("toUpper", function(val) {
  return val.toUpperCase();
});

var output = tmpl.render(context);
/// output == "OLLEH"</code></pre><h3>Conditionals.</h3><p>Instead of being <em>logic-less</em>, <code>combyne</code> doesn't make any assumptions and
allows you to do things like <code>if/elsif/else</code> with simple conditionals,
such as <code>if something == somethingElse</code> or <code>if not something</code>.  All data 
types will be coerced to Strings except for Numbers.</p>
<pre class="prettyprint source"><code>var template = "{%if not foo%}why not?{%endif%}";
var context = { foo: false };

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "why not?"</code></pre><p>or a more complicated example...</p>
<pre class="prettyprint source"><code>var template = "{%if foo == 'hello'%}Hi!{%else%}bye...{%endif%}";
var context = { foo: "hello" };

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "Hi!"</code></pre><p>elsif is also supported:</p>
<pre class="prettyprint source"><code>var template = "{%if foo == ''%}goodbye!{%elsif foo == 'hello'%}hello!{%endif%}";
var context = { foo: "hello" };

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "hello!"</code></pre><h3>Iterating arrays.</h3><p><em>Also works on array-like objects: arguments and NodeList.</em></p>
<pre class="prettyprint source"><code>var template = "{%each foo%}{{.}} {%endeach%}";
var context = { foo: [1,2,3,4] };

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "1 2 3 4 "</code></pre><h4>Iterating an array of objects shorthand.</h4><p>If you pass an array of objects to Combyne, you may iterate it via a shorthand:</p>
<pre class="prettyprint source"><code>var template = "{%each%}{{foo}} {%endeach%}";
var context = [{ foo: 1 }, { foo: 2 }, { foo: 3 }, { foo: 4 }];

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "1 2 3 4 "</code></pre><h4>Change the iterated identifer within loops.</h4><pre class="prettyprint source"><code>var template = "{%each arr as val%}{{val}}{%endeach%}";
var context = { arr: [1,2,3] };

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output = "123"</code></pre><h3>Iterating objects.</h3><pre class="prettyprint source"><code>var template = "{%each fruits as val key%}the {{key}} is {{val}}{%endeach%}";
var context = {
  fruits: {
    apple: "green"
  }
};

var tmpl = combyne(template);

var output = tmpl.render(context);
/// output == "the apple is green"</code></pre><h3>Partials.</h3><pre class="prettyprint source"><code>var template = "{{foo}} {%partial bar%}";
var context = { foo: "hello" };

var tmpl = combyne(template);

tmpl.registerPartial("bar", combyne("{{name}}", {
  name: "john"
}));

var output = tmpl.render(context);
/// output == "hello john"</code></pre><h4>Pass template data to partial.</h4><p>If you need to pass the template's data to the partial, simply use the magic
operator <code>.</code>.</p>
<pre class="prettyprint source"><code>var template = "{{foo}} {%partial bar .%}";
var context = { foo: "hello", name: "carl" };

var tmpl = combyne(template);

tmpl.registerPartial("bar", combyne("{{name}}"));

var output = tmpl.render(context);
/// output == "hello carl"</code></pre><h4>Render and inject a partial.</h4><p>When using a framework that handles rendering for you and you wish to inject
your template into a different template (maybe a layout) in a given region
you can express this through a render expression.</p>
<p>Illustrated below is a typical use case for this feature:</p>
<pre class="prettyprint source"><code>var template = "{%render layout as content%}<h1>{{header}}</h1>{%endrender%}";
var context = { header: "Home page" };

var page = combyne(template);

// Register the layout template into the page template.
page.registerPartial("layout", combyne("<body>{%partial content%}</body>"));

var output = page.render(context);
/// output == "<body><h1>Home page</h1></body>"</code></pre><p>The context object you pass at the <code>page.render</code> line will be propagated to
the partial template.  This means that you can optionally pass a nested object
structure like:</p>
<pre class="prettyprint source"><code>var context = {
  header: "My site",

  page: {
    header: "Home page"
  }
};

// Pass the page object to the page template, restricting what it has access
// to.
var layout = "<title>{{header}}</title><body>{%partial content page%}</body>";

// Register it in the partial. 
page.registerPartial("layout", combyne(layout));

var output = page.render(context);
/// output == "<title>My site</title><body><h1>Home page</h1></body>"</code></pre><h2>Unit tests.</h2><p>There are many ways to run the unit tests as this library can operate in
various environments.</p>
<h3>Browser</h3><p>Open test/index.html in your web browser.</p>
<h3>Node</h3><p>Run the tests inside the Node runtime and within PhantomJS:</p>
<pre class="prettyprint source"><code>grunt test</code></pre><p>This will run the tests against the AMD source, the built modern
dist/combyne.js, and the built legacy dist/combyne.legacy.js files.</p>
<h3>Continuous testing</h3><p>To keep the PhantomJS tests running continuously, run:</p>
<pre class="prettyprint source"><code>grunt karma:watch</code></pre><p>The tests will automatically run whenever files change.</p>
<h4>Code coverage</h4><p>If you run the tests through Karma, a test/coverage directory will be created
containing folders that correspond with the environment where the tests were
run.</p>
<p>If you are running the defaults you should see something that looks like:</p>
<pre class="prettyprint source"><code>.
└── coverage
    ├── Chrome 33.0.1750 (Linux)
    └── PhantomJS 1.9.7 (Linux)</code></pre><p>Inside PhantomJS contains the HTML output that can be opened in a browser to
inspect the source coverage from running the tests.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-compiler.html">compiler</a></li><li><a href="module-grammar.html">grammar</a></li><li><a href="module-index.html">index</a></li><li><a href="encode.html">shared/encode</a></li><li><a href="register_filter.html">shared/register_filter</a></li><li><a href="register_partial.html">shared/register_partial</a></li><li><a href="module-tokenizer.html">tokenizer</a></li><li><a href="module-tree.html">tree</a></li><li><a href="create_object.html">utils/create_object</a></li><li><a href="defaults.html">utils/defaults</a></li><li><a href="escape_delimiter.html">utils/escape_delimiter</a></li><li><a href="map_.html">utils/map</a></li><li><a href="type.html">utils/type</a></li></ul><h3>Classes</h3><ul><li><a href="module-compiler.Compiler.html">Compiler</a></li><li><a href="module-grammar.Grammar.html">Grammar</a></li><li><a href="module-index.Combyne.html">Combyne</a></li><li><a href="module-tokenizer.Tokenizer.html">Tokenizer</a></li><li><a href="module-tree.Tree.html">Tree</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha8</a> on Tue Jul 15 2014 23:32:14 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>